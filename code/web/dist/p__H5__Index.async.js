(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{vTnR:function(e,t,a){"use strict";a.r(t);a("g9YV");var n=a("wCAj"),r=(a("14J3"),a("BMrR")),o=(a("jCWc"),a("kPKH")),i=(a("+L6B"),a("2/Rp")),c=(a("y8nQ"),a("Vl3Y")),l=(a("5NDa"),a("5rEg")),s=(a("sPJy"),a("bE4q")),u=(a("/zsF"),a("PArb")),p=(a("Q9mQ"),a("q1tI")),f=a.n(p),d=a("3S7+"),m=a("H84U"),h=a("6CfX");function y(e){"@babel/helpers - typeof";return y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},v.apply(this,arguments)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t,a){return t&&b(e.prototype,t),a&&b(e,a),e}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function k(e){var t=x();return function(){var a,n=P(e);if(t){var r=P(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return C(this,a)}}function C(e,t){return!t||"object"!==y(t)&&"function"!==typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var j=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]])}return a},_=function(e){w(a,e);var t=k(a);function a(){var e;return g(this,a),e=t.apply(this,arguments),e.saveTooltip=function(t){e.tooltip=t},e.renderPopover=function(t){var a=t.getPrefixCls,n=e.props,r=n.prefixCls,o=j(n,["prefixCls"]);delete o.title;var i=a("popover",r);return p["createElement"](d["a"],v({},o,{prefixCls:i,ref:e.saveTooltip,overlay:e.getOverlay(i)}))},e}return E(a,[{key:"getPopupDomNode",value:function(){return this.tooltip.getPopupDomNode()}},{key:"getOverlay",value:function(e){var t=this.props,a=t.title,n=t.content;return Object(h["a"])(!("overlay"in this.props),"Popover","`overlay` is removed, please use `content` instead, see: https://u.ant.design/popover-content"),p["createElement"]("div",null,a&&p["createElement"]("div",{className:"".concat(e,"-title")},a),p["createElement"]("div",{className:"".concat(e,"-inner-content")},n))}},{key:"render",value:function(){return p["createElement"](m["a"],null,this.renderPopover)}}]),a}(p["Component"]);_.defaultProps={placement:"top",transitionName:"zoom-big",trigger:"hover",mouseEnterDelay:.1,mouseLeaveDelay:.1,overlayStyle:{}};a("P2fV");var L,T,I=a("NJEC"),H=a("p0pE"),R=a.n(H),D=a("2Taf"),F=a.n(D),N=a("vZ4D"),M=a.n(N),J=a("l4Ni"),q=a.n(J),z=a("ujKo"),A=a.n(z),B=a("MhPg"),K=a.n(B),V=(a("2qtc"),a("kLXV")),Q=a("MuoO"),X=a("7DNP"),Y=a("KHju");function U(e,t,a){return t=A()(t),q()(e,W()?Reflect.construct(t,a||[],A()(e).constructor):t.apply(e,a))}function W(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(W=function(){return!!e})()}var Z=V["a"].confirm,G=(L=Object(Q["connect"])(function(e){var t=e.api,a=e.loading;return{api:t,_loading:a.effects["api/getH5List"]}}),L(T=function(e){function t(){var e;F()(this,t);for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return e=U(this,t,[].concat(n)),e.state={params:{page:1,page_rows:10,search:""},visible:!1,data:{}},e.handleTableChange=function(t){e.setState({params:R()({},e.state.params,{page:t.current,page_rows:t.pageSize})},function(){e.fetch(e.state.params)})},e.showEditModel=function(t,a,n,r){e.setState({visible:!0,data:{id:t,title:a,desc:n,auth_code:r}},function(){})},e.showConfirm=function(t){var a=e;Z({title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u8be5\u9879\u76ee\u5417?",content:"\u6ce8\u610f\uff1a\u70b9\u51fb\u786e\u8ba4\uff0c\u5c06\u5220\u9664\u8be5\u9879\u76ee\uff0c\u4ee5\u53ca\u8be5\u9879\u76ee\u7684\u9879\u76ee\u53d1\u5e03\u7248\u672c",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){return new Promise(function(e,n){var r=a.props.dispatch;r({type:"api/delProject",payload:{project_id:t}}).then(function(){a.setState({params:R()({},a.state.params,{page:1})},function(){a.fetch(a.state.params),setTimeout(Math.random()>.5?e:n,1e3)})})}).catch(function(){return console.log("Oops errors!")})},onCancel:function(){}})},e.onEditFormFieldChange=function(t){switch(t.target.name){case"title":e.setState({data:R()({},e.state.data,{title:t.target.value})});break;case"desc":e.setState({data:R()({},e.state.data,{desc:t.target.value})});break;case"auth_code":e.setState({data:R()({},e.state.data,{auth_code:t.target.value})});break}},e.handleEditOk=function(){e.setState({confirmLoading:!0},function(){Object(Y["a"])("/api/editH5List",e.state.data).then(function(t){e.setState({confirmLoading:!1}),200===t.code&&e.setState({visible:!1,params:R()({},e.state.params,{page:1})},function(){e.fetch(e.state.params)})})})},e}return K()(t,e),M()(t,[{key:"componentDidMount",value:function(){this.fetch(this.state.params)}},{key:"fetch",value:function(e){var t=this.props.dispatch;t({type:"api/getH5List",payload:e})}},{key:"render",value:function(){var e=this,t=[{title:"\u9879\u76ee\u6807\u8bc6",dataIndex:"code",key:"code",render:function(t,a){return f.a.createElement("span",null,t,f.a.createElement(I["a"],{title:"\u786e\u5b9a\u8981\u5237\u65b0\u9879\u76ee\u6807\u8bc6\u5417\uff1f",onConfirm:function(){Object(Y["a"])("/api/refreshProjectCode",{id:a.id}).then(function(t){200===t.code&&e.fetch(e.state.params)})},okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},f.a.createElement("a",{style:{marginLeft:2}},"\ud83d\udd04")))}},{title:"\u9879\u76ee\u540d\u79f0",dataIndex:"title",render:function(e,t){return f.a.createElement(X["Link"],{to:"/h5/index/version/".concat(t.id)},e)}},{title:"\u9879\u76ee\u7b80\u4ecb",dataIndex:"desc",key:"desc",render:function(e){return f.a.createElement("div",null,f.a.createElement(_,{content:e},e.substr(0,150)))}},{title:"\u6388\u6743\u7801",dataIndex:"auth_code",key:"auth_code"},{title:"\u521b\u5efa\u4eba",dataIndex:"appid",key:"appid"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"\u64cd\u4f5c",key:"action",render:function(t,a){return f.a.createElement("span",null,f.a.createElement("a",{onClick:function(){e.showEditModel(a.id,a.title,a.desc,a.auth_code)}},"\u7f16\u8f91"),f.a.createElement(u["a"],{type:"vertical"}),f.a.createElement("a",{style:{color:"red"},onClick:function(){e.showConfirm(a.id)}},"\u5220\u9664"))}}],a=this.props,p=a._loading,d=a.api,m={current:d.getH5List.page,total:d.getH5List.total,pageSize:this.state.params.page_rows,showTotal:function(e,t){return"\u603b\u5171 ".concat(e," \u6761\u6570\u636e")}};return f.a.createElement("div",null,f.a.createElement(s["a"],null,f.a.createElement(s["a"].Item,null,f.a.createElement(X["Link"],{to:"/"},"\u9996\u9875")),f.a.createElement(s["a"].Item,null,f.a.createElement(X["Link"],{to:"/h5/index"},"H5\u9879\u76ee\u5217\u8868"))),f.a.createElement("div",{style:{backgroundColor:"white",padding:"10px 20px",marginTop:20}},f.a.createElement(V["a"],{title:this.state.data.id?"\u7f16\u8f91\u9879\u76ee":"\u65b0\u589e\u9879\u76ee",visible:this.state.visible,onOk:function(){e.setState({confirmLoading:!0},function(){var t=e.state.data.id?"/api/editH5List":"/api/addH5List";Object(Y["a"])(t,e.state.data).then(function(t){e.setState({confirmLoading:!1}),200===t.code&&e.setState({visible:!1,params:R()({},e.state.params,{page:1})},function(){e.fetch(e.state.params)})})})},confirmLoading:this.state.confirmLoading||!1,okText:"\u4fdd\u5b58",onCancel:function(){e.setState({visible:!1,confirmLoading:!1})}},f.a.createElement(c["a"],{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},f.a.createElement(c["a"].Item,{required:!0,label:"\u9879\u76ee\u540d\u79f0"},f.a.createElement(l["a"],{autoComplete:"off",onInput:this.onEditFormFieldChange,name:"title",value:this.state.data.title,placeholder:"\u8bf7\u8f93\u5165"})),f.a.createElement(c["a"].Item,{label:"\u9879\u76ee\u7b80\u4ecb"},f.a.createElement(l["a"].TextArea,{onInput:this.onEditFormFieldChange,name:"desc",rows:4,value:this.state.data.desc,placeholder:"\u8bf7\u8f93\u5165"})),f.a.createElement(c["a"].Item,{label:"\u6388\u6743\u7801"},f.a.createElement(l["a"],{autoComplete:"off",onInput:this.onEditFormFieldChange,name:"auth_code",rows:4,value:this.state.data.auth_code,placeholder:"\u8bf7\u8f93\u5165"})))),f.a.createElement("div",{style:{padding:"20px 0"}},f.a.createElement(r["a"],null,f.a.createElement(o["a"],{span:8},f.a.createElement(i["a"],{type:"primary",onClick:function(){e.setState({visible:!0,data:{}})}},"\u65b0\u589e")),f.a.createElement(o["a"],{span:8,offset:8},f.a.createElement(l["a"].Search,{style:{float:"right"},allowClear:!0,placeholder:"\u8bf7\u8f93\u5165\u641c\u7d22\u5173\u952e\u5b57",onSearch:function(t){e.setState({params:R()({},e.state.params,{page:1,search:t})},function(){e.fetch(e.state.params)})}})))),f.a.createElement(n["a"],{tableLayout:"fixed",dataSource:d.getH5List.list,rowKey:function(e){return e.id},pagination:m,columns:t,loading:p,onChange:this.handleTableChange})))}}])}(p["Component"]))||T);t["default"]=G}}]);